<RadzenCard>
    <EditForm Model="@PacienteRequest" OnValidSubmit="OnSubmit">
        <DataAnnotationsValidator />

        <div class="d-flex flex-column justify-content-end">
            <RadzenLabel Text="Num. Historia" class="text-radzen-secondary me-0 me-md-3"
                         Style="font-weight: 700"/>

            <RadzenTextBox @bind-Value="PacienteRequest.NumHistoria"
                           class="mt-1 mt-md-0" Min="1"/>

            <ValidationMessage For="() => PacienteRequest.NumHistoria"/>
        </div>

        <div class="row row-cols-1 row-cols-md-2 g-3 mb-3 mt-1 mt-md-0">
            <div class="col">
                <RadzenLabel Text="Nombres" />
                <div class="mt-1">
                    <RadzenTextBox @bind-Value="PacienteRequest.Nombres" class="w-100" />
                    <ValidationMessage For="() => PacienteRequest.Nombres" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Apellidos" />
                <div class="mt-1">
                    <RadzenTextBox @bind-Value="PacienteRequest.Apellidos" class="w-100" />
                    <ValidationMessage For="() => PacienteRequest.Apellidos" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Sexo" />
                <div class="mt-1">
                    <RadzenDropDown TValue="string" Data="SexoListDropDown.SexoList"
                                    ValueProperty="Sexo" TextProperty="Sexo"
                                    class="w-100" Placeholder="Seleccione"
                                    @bind-Value="PacienteRequest.Sexo"/>

                    <ValidationMessage For="() => PacienteRequest.Sexo" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Fecha de Nacimiento" />
                <div class="mt-1">
                    <RadzenDatePicker @bind-Value="PacienteRequest.FechaNacimiento"
                                      class="w-100" DateFormat="d"
                                      TValue="DateTime"/>

                    <ValidationMessage For="() => PacienteRequest.FechaNacimiento" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Cédula" />
                <div class="mt-1">
                    <RadzenTextBox @bind-Value="PacienteRequest.Cedula" class="w-100" />
                    <ValidationMessage For="() => PacienteRequest.Cedula" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Email" />
                <div class="mt-1">
                    <RadzenTextBox @bind-Value="PacienteRequest.Email" class="w-100" />
                    <ValidationMessage For="() => PacienteRequest.Email" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Teléfono de contacto" />
                <div class="mt-1">
                    <RadzenTextBox @bind-Value="PacienteRequest.Telefono" class="w-100" />
                    <ValidationMessage For="() => PacienteRequest.Telefono" />
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Grupos"/>
                <div class="mt-1">
                    @if (_grupos is not null)
                    {
                        <RadzenDropDown AllowClear="true" Style="width: 100%"
                                        Data="@_grupos" AllowVirtualization="true"
                                        Placeholder="Seleccione" Change="@SelectGrupo"
                                        TextProperty="Nombre" ValueProperty="Id"
                                        Multiple="true" AllowFiltering="true"
                                        TValue="IEnumerable<string>" Value="_gruposIds"
                                        FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"/>
                    }
                    else
                    {
                        <span>Cargando...</span>
                    }
                </div>
            </div>
            <div class="col">
                <RadzenLabel Text="Dirección"/>
                <div class="mt-1">
                    <RadzenTextArea @bind-Value="PacienteRequest.Direccion" class="w-100"
                                    MaxLength="300"/>

                    <ValidationMessage For="() => PacienteRequest.Direccion"/>
                </div>
            </div>
        </div>
        <div class="mb-2">
            <FormButtons NavLinkRoute="pacienteList" />
        </div>
    </EditForm>
</RadzenCard>